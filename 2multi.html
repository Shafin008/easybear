---
layout: page
title: Multi-Image Classifier
---

<input id="photos" type="file" multiple accept="image/*">
<div id="results"></div>

<script type="module">
import { Client } from "https://cdn.jsdelivr.net/npm/@gradio/client/dist/index.min.js";

const client = await Client.connect("shafin008/EasyBear");

async function get_pred(file) {
  return new Promise((resolve) => {
    const reader = new FileReader();
    reader.onload = async () => {
      const result = await client.predict("/predict", { img: file });
      const prediction = result.data[0];

      const div = document.createElement("div");
      div.innerHTML = `<img class="prediction" src="${reader.result}" width="300">
                       <p>This is a '${prediction.label}' bear</p>`;
      results.append(div);

      resolve(prediction);
    };
    reader.readAsDataURL(file);
  });
}

photos.addEventListener("input", async () => {
  results.innerHTML = "";
  await Promise.allSettled([...photos.files].map(get_pred));
});
</script>
